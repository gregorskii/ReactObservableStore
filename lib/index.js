!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],e):e(t.ReactObservableStore={},t.React)}(this,function(t,a){"use strict";a=a&&a.hasOwnProperty("default")?a.default:a;var e="object"==typeof global&&global&&global.Object===Object&&global,r="object"==typeof self&&self&&self.Object===Object&&self,n=e||r||Function("return this")(),o=n.Symbol,i=Object.prototype,u=i.hasOwnProperty,c=i.toString,s=o?o.toStringTag:void 0;var f=Object.prototype.toString;var p="[object Null]",l="[object Undefined]",h=o?o.toStringTag:void 0;function b(t){return null==t?void 0===t?l:p:h&&h in Object(t)?function(t){var e=u.call(t,s),r=t[s];try{t[s]=void 0}catch(t){}var n=c.call(t);return e?t[s]=r:delete t[s],n}(t):(e=t,f.call(e));var e}function x(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var v="[object AsyncFunction]",y="[object Function]",d="[object GeneratorFunction]",g="[object Proxy]";function j(t){if(!x(t))return!1;var e=b(t);return e==y||e==d||e==v||e==g}var _,w=n["__core-js_shared__"],m=(_=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||""))?"Symbol(src)_1."+_:"";var O=Function.prototype.toString;function A(t){if(null!=t){try{return O.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var S=/^\[object .+?Constructor\]$/,z=Function.prototype,P=Object.prototype,E=z.toString,I=P.hasOwnProperty,M=RegExp("^"+E.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function F(t){return!(!x(t)||(e=t,m&&m in e))&&(j(t)?M:S).test(A(t));var e}function U(t,e){var r,n,o=(n=e,null==(r=t)?void 0:r[n]);return F(o)?o:void 0}var C=function(){try{var t=U(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();function D(t,e,r){"__proto__"==e&&C?C(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function R(t,e){return t===e||t!=t&&e!=e}var T=Object.prototype.hasOwnProperty;function N(t,e,r){var n=t[e];T.call(t,e)&&R(n,r)&&(void 0!==r||e in t)||D(t,e,r)}var $=Array.isArray;function B(t){return null!=t&&"object"==typeof t}var k="[object Symbol]";function q(t){return"symbol"==typeof t||B(t)&&b(t)==k}var V=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,L=/^\w*$/;var W=U(Object,"create");var G=Object.prototype.hasOwnProperty;var J=Object.prototype.hasOwnProperty;function K(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function H(t,e){for(var r=t.length;r--;)if(R(t[r][0],e))return r;return-1}K.prototype.clear=function(){this.__data__=W?W(null):{},this.size=0},K.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},K.prototype.get=function(t){var e=this.__data__;if(W){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return G.call(e,t)?e[t]:void 0},K.prototype.has=function(t){var e=this.__data__;return W?void 0!==e[t]:J.call(e,t)},K.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=W&&void 0===e?"__lodash_hash_undefined__":e,this};var Q=Array.prototype.splice;function X(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}X.prototype.clear=function(){this.__data__=[],this.size=0},X.prototype.delete=function(t){var e=this.__data__,r=H(e,t);return!(r<0||(r==e.length-1?e.pop():Q.call(e,r,1),--this.size,0))},X.prototype.get=function(t){var e=this.__data__,r=H(e,t);return r<0?void 0:e[r][1]},X.prototype.has=function(t){return-1<H(this.__data__,t)},X.prototype.set=function(t,e){var r=this.__data__,n=H(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};var Y=U(n,"Map");function Z(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function tt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}tt.prototype.clear=function(){this.size=0,this.__data__={hash:new K,map:new(Y||X),string:new K}},tt.prototype.delete=function(t){var e=Z(this,t).delete(t);return this.size-=e?1:0,e},tt.prototype.get=function(t){return Z(this,t).get(t)},tt.prototype.has=function(t){return Z(this,t).has(t)},tt.prototype.set=function(t,e){var r=Z(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};var et="Expected a function";function rt(o,i){if("function"!=typeof o||null!=i&&"function"!=typeof i)throw new TypeError(et);var a=function(){var t=arguments,e=i?i.apply(this,t):t[0],r=a.cache;if(r.has(e))return r.get(e);var n=o.apply(this,t);return a.cache=r.set(e,n)||r,n};return a.cache=new(rt.Cache||tt),a}rt.Cache=tt;var nt,ot,it=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,at=/\\(\\)?/g,ut=(ot=(nt=rt(function(t){var o=[];return 46===t.charCodeAt(0)&&o.push(""),t.replace(it,function(t,e,r,n){o.push(r?n.replace(at,"$1"):e||t)}),o},function(t){return 500===ot.size&&ot.clear(),t})).cache,nt);function ct(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}var st=1/0,ft=o?o.prototype:void 0,pt=ft?ft.toString:void 0;function lt(t){if("string"==typeof t)return t;if($(t))return ct(t,lt)+"";if(q(t))return pt?pt.call(t):"";var e=t+"";return"0"==e&&1/t==-st?"-0":e}function ht(t,e){return $(t)?t:function(t,e){if($(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!q(t))||L.test(t)||!V.test(t)||null!=e&&t in Object(e)}(t,e)?[t]:ut(null==(r=t)?"":lt(r));var r}var bt=9007199254740991,vt=/^(?:0|[1-9]\d*)$/;function yt(t,e){var r=typeof t;return!!(e=null==e?bt:e)&&("number"==r||"symbol"!=r&&vt.test(t))&&-1<t&&t%1==0&&t<e}var dt=1/0;function gt(t){if("string"==typeof t||q(t))return t;var e=t+"";return"0"==e&&1/t==-dt?"-0":e}function jt(t,e,r){return null==t?t:function(t,e,r,n){if(!x(t))return t;for(var o=-1,i=(e=ht(e,t)).length,a=i-1,u=t;null!=u&&++o<i;){var c=gt(e[o]),s=r;if(o!=a){var f=u[c];void 0===(s=n?n(f,c,u):void 0)&&(s=x(f)?f:yt(e[o+1])?[]:{})}N(u,c,s),u=u[c]}return t}(t,e,r)}function _t(t,e){for(var r=0,n=(e=ht(e,t)).length;null!=t&&r<n;)t=t[gt(e[r++])];return r&&r==n?t:void 0}function wt(t,e,r,n){var o=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var u=e[i],c=n?n(r[u],t[u],u,r,t):void 0;void 0===c&&(c=t[u]),o?D(r,u,c):N(r,u,c)}return r}function mt(t){return t}var Ot=Math.max;function At(i,a,u){return a=Ot(void 0===a?i.length-1:a,0),function(){for(var t=arguments,e=-1,r=Ot(t.length-a,0),n=Array(r);++e<r;)n[e]=t[a+e];e=-1;for(var o=Array(a+1);++e<a;)o[e]=t[e];return o[a]=u(n),function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(i,this,o)}}var St=C?function(t,e){return C(t,"toString",{configurable:!0,enumerable:!1,value:(r=e,function(){return r}),writable:!0});var r}:mt,zt=Date.now;var Pt,xt,Et,It=(Pt=St,Et=xt=0,function(){var t=zt(),e=16-(t-Et);if(Et=t,0<e){if(800<=++xt)return arguments[0]}else xt=0;return Pt.apply(void 0,arguments)});var Mt=9007199254740991;function Ft(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=Mt}function Ut(t){return null!=t&&Ft(t.length)&&!j(t)}var Ct=Object.prototype;function Dt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ct)}function Rt(t){return B(t)&&"[object Arguments]"==b(t)}var Tt=Object.prototype,Nt=Tt.hasOwnProperty,$t=Tt.propertyIsEnumerable,Bt=Rt(function(){return arguments}())?Rt:function(t){return B(t)&&Nt.call(t,"callee")&&!$t.call(t,"callee")};var kt="object"==typeof t&&t&&!t.nodeType&&t,qt=kt&&"object"==typeof module&&module&&!module.nodeType&&module,Vt=qt&&qt.exports===kt?n.Buffer:void 0,Lt=(Vt?Vt.isBuffer:void 0)||function(){return!1},Wt={};function Gt(e){return function(t){return e(t)}}Wt["[object Float32Array]"]=Wt["[object Float64Array]"]=Wt["[object Int8Array]"]=Wt["[object Int16Array]"]=Wt["[object Int32Array]"]=Wt["[object Uint8Array]"]=Wt["[object Uint8ClampedArray]"]=Wt["[object Uint16Array]"]=Wt["[object Uint32Array]"]=!0,Wt["[object Arguments]"]=Wt["[object Array]"]=Wt["[object ArrayBuffer]"]=Wt["[object Boolean]"]=Wt["[object DataView]"]=Wt["[object Date]"]=Wt["[object Error]"]=Wt["[object Function]"]=Wt["[object Map]"]=Wt["[object Number]"]=Wt["[object Object]"]=Wt["[object RegExp]"]=Wt["[object Set]"]=Wt["[object String]"]=Wt["[object WeakMap]"]=!1;var Jt="object"==typeof t&&t&&!t.nodeType&&t,Kt=Jt&&"object"==typeof module&&module&&!module.nodeType&&module,Ht=Kt&&Kt.exports===Jt&&e.process,Qt=function(){try{var t=Kt&&Kt.require&&Kt.require("util").types;return t||Ht&&Ht.binding&&Ht.binding("util")}catch(t){}}(),Xt=Qt&&Qt.isTypedArray,Yt=Xt?Gt(Xt):function(t){return B(t)&&Ft(t.length)&&!!Wt[b(t)]},Zt=Object.prototype.hasOwnProperty;function te(t,e){var r=$(t),n=!r&&Bt(t),o=!r&&!n&&Lt(t),i=!r&&!n&&!o&&Yt(t),a=r||n||o||i,u=a?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],c=u.length;for(var s in t)!e&&!Zt.call(t,s)||a&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||yt(s,c))||u.push(s);return u}function ee(e,r){return function(t){return e(r(t))}}var re=ee(Object.keys,Object),ne=Object.prototype.hasOwnProperty;function oe(t){return Ut(t)?te(t):function(t){if(!Dt(t))return re(t);var e=[];for(var r in Object(t))ne.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}var ie,ae,ue,ce=Object.prototype.hasOwnProperty,se=(ie=function(t,e){if(Dt(e)||Ut(e))wt(e,oe(e),t);else for(var r in e)ce.call(e,r)&&N(t,r,e[r])},It(At(ae=function(t,e){var r=-1,n=e.length,o=1<n?e[n-1]:void 0,i=2<n?e[2]:void 0;for(o=3<ie.length&&"function"==typeof o?(n--,o):void 0,i&&function(t,e,r){if(!x(r))return!1;var n=typeof e;return!!("number"==n?Ut(r)&&yt(e,r.length):"string"==n&&e in r)&&R(r[e],t)}(e[0],e[1],i)&&(o=n<3?void 0:o,n=1),t=Object(t);++r<n;){var a=e[r];a&&ie(t,a,r,o)}return t},ue,mt),ae+""));function fe(t){var e=this.__data__=new X(t);this.size=e.size}fe.prototype.clear=function(){this.__data__=new X,this.size=0},fe.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},fe.prototype.get=function(t){return this.__data__.get(t)},fe.prototype.has=function(t){return this.__data__.has(t)},fe.prototype.set=function(t,e){var r=this.__data__;if(r instanceof X){var n=r.__data__;if(!Y||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new tt(n)}return r.set(t,e),this.size=r.size,this};var pe=Object.prototype.hasOwnProperty;function le(t){if(!x(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=Dt(t),r=[];for(var n in t)("constructor"!=n||!e&&pe.call(t,n))&&r.push(n);return r}function he(t){return Ut(t)?te(t,!0):le(t)}var be="object"==typeof t&&t&&!t.nodeType&&t,ve=be&&"object"==typeof module&&module&&!module.nodeType&&module,ye=ve&&ve.exports===be?n.Buffer:void 0,de=ye?ye.allocUnsafe:void 0;function ge(){return[]}var je=Object.prototype.propertyIsEnumerable,_e=Object.getOwnPropertySymbols,we=_e?function(e){return null==e?[]:(e=Object(e),function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}(_e(e),function(t){return je.call(e,t)}))}:ge;function me(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}var Oe=ee(Object.getPrototypeOf,Object),Ae=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)me(e,we(t)),t=Oe(t);return e}:ge;function Se(t,e,r){var n=e(t);return $(t)?n:me(n,r(t))}function ze(t){return Se(t,oe,we)}function Pe(t){return Se(t,he,Ae)}var xe=U(n,"DataView"),Ee=U(n,"Promise"),Ie=U(n,"Set"),Me=U(n,"WeakMap"),Fe="[object Map]",Ue="[object Promise]",Ce="[object Set]",De="[object WeakMap]",Re="[object DataView]",Te=A(xe),Ne=A(Y),$e=A(Ee),Be=A(Ie),ke=A(Me),qe=b;(xe&&qe(new xe(new ArrayBuffer(1)))!=Re||Y&&qe(new Y)!=Fe||Ee&&qe(Ee.resolve())!=Ue||Ie&&qe(new Ie)!=Ce||Me&&qe(new Me)!=De)&&(qe=function(t){var e=b(t),r="[object Object]"==e?t.constructor:void 0,n=r?A(r):"";if(n)switch(n){case Te:return Re;case Ne:return Fe;case $e:return Ue;case Be:return Ce;case ke:return De}return e});var Ve=qe,Le=Object.prototype.hasOwnProperty;var We=n.Uint8Array;function Ge(t){var e=new t.constructor(t.byteLength);return new We(e).set(new We(t)),e}var Je=/\w*$/;var Ke=o?o.prototype:void 0,He=Ke?Ke.valueOf:void 0;var Qe="[object Boolean]",Xe="[object Date]",Ye="[object Map]",Ze="[object Number]",tr="[object RegExp]",er="[object Set]",rr="[object String]",nr="[object Symbol]",or="[object ArrayBuffer]",ir="[object DataView]",ar="[object Float32Array]",ur="[object Float64Array]",cr="[object Int8Array]",sr="[object Int16Array]",fr="[object Int32Array]",pr="[object Uint8Array]",lr="[object Uint8ClampedArray]",hr="[object Uint16Array]",br="[object Uint32Array]";function vr(t,e,r){var n,o,i,a,u,c,s,f=t.constructor;switch(e){case or:return Ge(t);case Qe:case Xe:return new f(+t);case ir:return c=t,s=r?Ge(c.buffer):c.buffer,new c.constructor(s,c.byteOffset,c.byteLength);case ar:case ur:case cr:case sr:case fr:case pr:case lr:case hr:case br:return a=t,u=r?Ge(a.buffer):a.buffer,new a.constructor(u,a.byteOffset,a.length);case Ye:return new f;case Ze:case rr:return new f(t);case tr:return(i=new(o=t).constructor(o.source,Je.exec(o))).lastIndex=o.lastIndex,i;case er:return new f;case nr:return n=t,He?Object(He.call(n)):{}}}var yr=Object.create,dr=function(){function r(){}return function(t){if(!x(t))return{};if(yr)return yr(t);r.prototype=t;var e=new r;return r.prototype=void 0,e}}();var gr=Qt&&Qt.isMap,jr=gr?Gt(gr):function(t){return B(t)&&"[object Map]"==Ve(t)};var _r=Qt&&Qt.isSet,wr=_r?Gt(_r):function(t){return B(t)&&"[object Set]"==Ve(t)},mr=1,Or=2,Ar=4,Sr="[object Arguments]",zr="[object Function]",Pr="[object GeneratorFunction]",xr="[object Object]",Er={};function Ir(r,n,o,t,e,i){var a,u=n&mr,c=n&Or,s=n&Ar;if(o&&(a=e?o(r,t,e,i):o(r)),void 0!==a)return a;if(!x(r))return r;var f,p,l,h,b,v,y,d,g,j,_,w,m=$(r);if(m){if(_=(j=r).length,w=new j.constructor(_),_&&"string"==typeof j[0]&&Le.call(j,"index")&&(w.index=j.index,w.input=j.input),a=w,!u)return function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(r,a)}else{var O=Ve(r),A=O==zr||O==Pr;if(Lt(r))return function(t,e){if(e)return t.slice();var r=t.length,n=de?de(r):new t.constructor(r);return t.copy(n),n}(r,u);if(O==xr||O==Sr||A&&!e){if(a=c||A?{}:"function"!=typeof(g=r).constructor||Dt(g)?{}:dr(Oe(g)),!u)return c?(d=b=r,v=(y=a)&&wt(d,he(d),y),wt(b,Ae(b),v)):(h=f=r,p=(l=a)&&wt(h,oe(h),l),wt(f,we(f),p))}else{if(!Er[O])return e?r:{};a=vr(r,O,u)}}i||(i=new fe);var S=i.get(r);if(S)return S;if(i.set(r,a),wr(r))return r.forEach(function(t){a.add(Ir(t,n,o,t,r,i))}),a;if(jr(r))return r.forEach(function(t,e){a.set(e,Ir(t,n,o,e,r,i))}),a;var z=s?c?Pe:ze:c?keysIn:oe,P=m?void 0:z(r);return function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););}(P||r,function(t,e){P&&(t=r[e=t]),N(a,e,Ir(t,n,o,e,r,i))}),a}Er[Sr]=Er["[object Array]"]=Er["[object ArrayBuffer]"]=Er["[object DataView]"]=Er["[object Boolean]"]=Er["[object Date]"]=Er["[object Float32Array]"]=Er["[object Float64Array]"]=Er["[object Int8Array]"]=Er["[object Int16Array]"]=Er["[object Int32Array]"]=Er["[object Map]"]=Er["[object Number]"]=Er[xr]=Er["[object RegExp]"]=Er["[object Set]"]=Er["[object String]"]=Er["[object Symbol]"]=Er["[object Uint8Array]"]=Er["[object Uint8ClampedArray]"]=Er["[object Uint16Array]"]=Er["[object Uint32Array]"]=!0,Er["[object Error]"]=Er[zr]=Er["[object WeakMap]"]=!1;var Mr=1,Fr=4;function Ur(t){return Ir(t,Mr|Fr)}var Cr=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Dr=function(){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];Cr(this,n),this.storage=Ur(t),this.showLog=e}return n.sanitizeData=function(t){return Ur(JSON.parse(JSON.stringify(t)))},n.prototype.logging=function(){this.showLog&&console&&console.log("Store",this.storage)},n.prototype.init=function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(this.showLog=e,!t)throw new Error("Invalid store initialization");this.storage=se({},n.sanitizeData(t)),this.logging()},n.prototype.isValidNamespace=function(t){return!!this.storage[t]},n.prototype.update=function(t,e){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2]?this.storage[t]:{};this.storage[t]=se(r,n.sanitizeData(e)),this.logging()},n.prototype.get=function(t){var e,r,n,o;t.split(".");return e=this.storage,r=t,void 0===(o=(n=null)==e?void 0:_t(e,r))?n:o},n.prototype.set=function(t,e){jt(this.storage,t,n.sanitizeData(e)),this.logging()},n}(),Rr=function(n){function o(t){Cr(this,o);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t));e._isMounted=!1,e._queue=[],e.state=se({},t.store.get(t.namespace));var r=e;return r.id=t.subscribe(t.namespace,function(t){r.update(t)}),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,n),o.prototype.update=function(t){var e=se(this.state,t);this._isMounted?this.setState(e):this._queue.push(e)},o.prototype.flushUpdates=function(){if(this._queue.length){var e={};this._queue.map(function(t){return e=se(e,t)}),this._queue.splice(0,this._queue.length),this.update(e)}},o.prototype.componentDidMount=function(){this._isMounted=!0,this.flushUpdates()},o.prototype.componentWillUnmount=function(){this._isMounted=!1,this.props.unsubscribe(this.props.namespace,this.id)},o.prototype.render=function(){var t=this.props,e=t.store,r=t.namespace,n=se({},this.props.input);return n=se(n,e.get(r)),this.props.render(n)},o}(a.Component);function Tr(t,e){return e.length<2?t:_t(t,function(t,e,r){var n=-1,o=t.length;e<0&&(e=o<-e?0:o+e),(r=o<r?o:r)<0&&(r+=o),o=r<e?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i}(e,0,-1))}var Nr="[object Object]",$r=Function.prototype,Br=Object.prototype,kr=$r.toString,qr=Br.hasOwnProperty,Vr=kr.call(Object);function Lr(t){return function(t){if(!B(t)||b(t)!=Nr)return!1;var e=Oe(t);if(null===e)return!0;var r=qr.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&kr.call(r)==Vr}(t)?void 0:t}var Wr=o?o.isConcatSpreadable:void 0;function Gr(t){return $(t)||Bt(t)||!!(Wr&&t&&t[Wr])}function Jr(t){return(null==t?0:t.length)?function t(e,r,n,o,i){var a=-1,u=e.length;for(n||(n=Gr),i||(i=[]);++a<u;){var c=e[a];0<r&&n(c)?1<r?t(c,r-1,n,o,i):me(i,c):o||(i[i.length]=c)}return i}(t,1):[]}var Kr,Hr=It(At(Kr=function(e,t){var r={};if(null==e)return r;var n=!1;t=ct(t,function(t){return t=ht(t,e),n||(n=1<t.length),t}),wt(e,Pe(e),r),n&&(r=Ir(r,7,Lr));for(var o,i,a,u,c=t.length;c--;)o=r,i=t[c],u=a=void 0,null==(o=Tr(o,i=ht(i,o)))||delete o[gt((a=i,u=null==a?0:a.length,u?a[u-1]:void 0))];return r},void 0,Jr),Kr+""),Qr=function(){function n(){Cr(this,n),this.observers={}}return n.prototype.init=function(t){this.observers[t]={}},n.prototype.subscribe=function(t,e){if(!this.observers[t])throw new Error("Invalid namespace to be subscribed");var r=n.generateObserverId();return this.observers[t][r]=e,r},n.prototype.unsubscribe=function(t,e){this.observers[t]=Hr(this.observers[t],[e])},n.prototype.update=function(e,r,t){var n=this,o=t||window;Object.keys(this.observers[e]).forEach(function(t){n.observers[e][t]&&n.observers[e][t].call(o,r)})},n.generateObserverId=function(){return"o_"+Math.random().toString(36).substring(2)},n.prototype.register=function(e,r,n){var o=this;if(!n||!this.isReactComponent(n))throw new Error("Invalid observer for React Observable Store");var t=n.prototype.constructor,i=t.displayName||t.name;return function(t){return a.createElement(Rr,{name:i,input:t,store:r,subscribe:o.subscribe.bind(o),unsubscribe:o.unsubscribe.bind(o),namespace:e,render:function(t){return a.createElement(n,t)}})}},n.prototype.isReactComponent=function(t){return!!t.prototype.isReactComponent||!!t.prototype.isPureReactComponent},n}(),Xr=null,Yr=new(function(){function e(t){return Cr(this,e),Xr||(this.store=new Dr,this.strategy=t,Xr=this)}return e.prototype.init=function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];for(var r in this.store.init(t,e),t)this.strategy.init(r)},e.prototype.extractNamespaceFromKey=function(t){return t.split(".")[0]},e.prototype.update=function(t,e){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(!this.store.isValidNamespace(t))throw new Error("Invalid namespace");this.store.update(t,e,r);var n=this.store.get(t);this.strategy.update(t,n)},e.prototype.get=function(t){return this.store.get(t)},e.prototype.set=function(t,e){this.store.set(t,e);var r=this.extractNamespaceFromKey(t);this.strategy.update(r,this.store.get(r))},e.prototype.subscribe=function(t,e){return this.strategy.subscribe(t,e)},e.prototype.unsubscribe=function(t,e){return this.strategy.unsubscribe(t,e)},e.prototype.withStore=function(t,e){return Xr.strategy.register(t,Xr.store,e)},e}())(new Qr),Zr=Yr.withStore;t.withStore=Zr,t.default=Yr,Object.defineProperty(t,"__esModule",{value:!0})});
